[gd_scene load_steps=13 format=3 uid="uid://df1fekx267sun"]

[ext_resource type="PackedScene" uid="uid://cv0lbnaok2e04" path="res://assets/Man/ManV2.glb" id="1_xg0wm"]
[ext_resource type="Script" uid="uid://cs4lupw5jm17h" path="res://scripts/man_v_2.gd" id="2_n3se6"]
[ext_resource type="ArrayMesh" uid="uid://bea45ul824fu6" path="res://assets/Man/manV2.tres" id="3_k28le"]
[ext_resource type="PackedScene" uid="uid://ngq81kv18rg2" path="res://scenes/hand_container.tscn" id="4_qo8og"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_xg0wm"]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_n3se6"]
animation = &"attack1"

[sub_resource type="AnimationNodeOneShot" id="AnimationNodeOneShot_k28le"]
filter_enabled = true
filters = ["", "Armature/Skeleton3D:hand.r", "Armature/Skeleton3D:lowerarm.r", "Armature/Skeleton3D:middle_f.r", "Armature/Skeleton3D:middle_f.r.001", "Armature/Skeleton3D:middle_f.r.002", "Armature/Skeleton3D:pinky_f.r", "Armature/Skeleton3D:pinky_f.r.001", "Armature/Skeleton3D:pinky_f.r.002", "Armature/Skeleton3D:pointer_f.r", "Armature/Skeleton3D:pointer_f.r.001", "Armature/Skeleton3D:pointer_f.r.002", "Armature/Skeleton3D:ring_f.r", "Armature/Skeleton3D:ring_f.r.001", "Armature/Skeleton3D:ring_f.r.002", "Armature/Skeleton3D:thumb.r", "Armature/Skeleton3D:thumb.r.001", "Armature/Skeleton3D:thumb.r.002", "Armature/Skeleton3D:upperarm.r"]

[sub_resource type="AnimationNodeTimeScale" id="AnimationNodeTimeScale_k28le"]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_qo8og"]
animation = &"idle"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_oksqh"]
animation = &"run"

[sub_resource type="AnimationNodeBlendSpace1D" id="AnimationNodeBlendSpace1D_wkjr7"]
blend_point_0/node = SubResource("AnimationNodeAnimation_qo8og")
blend_point_0/pos = 0.0
blend_point_1/node = SubResource("AnimationNodeAnimation_oksqh")
blend_point_1/pos = 1.0
min_space = 0.0

[sub_resource type="AnimationNodeBlendTree" id="AnimationNodeBlendTree_tv230"]
graph_offset = Vector2(-436.15015, 95.83951)
nodes/run/node = SubResource("AnimationNodeBlendSpace1D_wkjr7")
nodes/run/position = Vector2(-220, 180)
"nodes/Animation 3/node" = SubResource("AnimationNodeAnimation_n3se6")
"nodes/Animation 3/position" = Vector2(-340, 400)
nodes/OneShot/node = SubResource("AnimationNodeOneShot_k28le")
nodes/OneShot/position = Vector2(60, 260)
nodes/TimeScale/node = SubResource("AnimationNodeTimeScale_k28le")
nodes/TimeScale/position = Vector2(-140, 400)
node_connections = [&"output", 0, &"OneShot", &"OneShot", 0, &"run", &"OneShot", 1, &"TimeScale", &"TimeScale", 0, &"Animation 3"]

[node name="PlayerController" instance=ExtResource("1_xg0wm")]
script = ExtResource("2_n3se6")

[node name="player_collision" type="CollisionShape3D" parent="." index="0"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0)
shape = SubResource("CapsuleShape3D_xg0wm")

[node name="Skeleton3D" parent="Armature" index="0"]
bones/0/rotation = Quaternion(-0.021824481, 0, 0, 0.9997618)
bones/1/rotation = Quaternion(0.13163112, 1.1817205e-07, 1.5691658e-08, 0.9912988)
bones/2/position = Vector3(0.18371801, 0.5220227, -0.019428)
bones/2/rotation = Quaternion(-0.3570217, 0.062063783, 0.88132286, -0.30323866)
bones/3/rotation = Quaternion(0.74647, -0.6112616, -0.04767859, 0.25858968)
bones/4/rotation = Quaternion(0.14230895, 0.037901238, -0.26096818, 0.9540478)
bones/18/rotation = Quaternion(0.28560078, 0.02743943, -0.87850463, 0.38198024)
bones/19/rotation = Quaternion(-0.14842306, 0.20991687, -0.08165565, 0.96293193)
bones/20/rotation = Quaternion(0.006031989, -0.024316028, 0.9985345, -0.04797266)
bones/20/scale = Vector3(1.0000538, 0.9999992, 1.0000136)
bones/21/rotation = Quaternion(-0.04001728, 0.0009063637, -0.024715234, 0.99889284)
bones/21/scale = Vector3(0.9999997, 1.0000004, 0.99999994)
bones/22/rotation = Quaternion(0.59938014, 0.07649312, 0.038757753, 0.7958581)
bones/22/scale = Vector3(1.0000068, 1.0000116, 1.0000035)
bones/23/position = Vector3(-0.18371798, 0.5220227, -0.019427963)
bones/23/rotation = Quaternion(0.05065141, 0.23533563, 0.9540124, 0.17863898)
bones/23/scale = Vector3(1.0000012, 1.0000001, 1)
bones/24/rotation = Quaternion(0.8717581, 0.07412333, -0.03484877, 0.48304173)
bones/25/rotation = Quaternion(-0.5598628, -0.14954677, 0.12796366, 0.8048694)
bones/26/rotation = Quaternion(-0.025649445, -9.770907e-05, -0.034850404, 0.9990634)
bones/27/rotation = Quaternion(0.031535517, -0.001360926, 0.0489769, 0.998301)
bones/28/rotation = Quaternion(0.040796068, 0.0028934777, 0.03950224, 0.99838215)
bones/29/rotation = Quaternion(0.24911633, 0.13717505, 0.5859452, 0.7588098)
bones/30/rotation = Quaternion(0.010083887, -0.010480172, 0.64364713, 0.76518416)
bones/31/rotation = Quaternion(0.03188334, -0.021360837, 0.62274677, 0.7814817)
bones/32/rotation = Quaternion(0.2545386, 0.14175557, 0.5905349, 0.7525849)
bones/33/rotation = Quaternion(0.011233301, -0.010453247, 0.64493024, 0.7640875)
bones/34/rotation = Quaternion(0.011071309, -0.0055067004, 0.627228, 0.77873755)
bones/35/rotation = Quaternion(0.20390016, 0.12558784, 0.5247213, 0.8168966)
bones/36/rotation = Quaternion(0.04248765, -0.034271687, 0.6327943, 0.7723935)
bones/37/rotation = Quaternion(0.015495612, -0.008476397, 0.6369377, 0.77071303)
bones/38/rotation = Quaternion(0.60192573, 0.2162588, -0.38250095, 0.6667913)
bones/39/rotation = Quaternion(-0.13680926, 0.17851979, 0.08379684, 0.97076875)
bones/40/rotation = Quaternion(0.05770611, -0.18801138, 0.12403413, 0.97259307)
bones/41/rotation = Quaternion(-0.0060319146, -0.024316033, 0.9985345, 0.047972657)
bones/41/scale = Vector3(1.0000538, 0.9999992, 1.0000136)
bones/42/rotation = Quaternion(-0.040017277, -0.0009063633, 0.024715235, 0.99889284)
bones/43/rotation = Quaternion(0.59938014, -0.07649303, -0.038757823, 0.79585814)
bones/43/scale = Vector3(1.0000067, 1.0000116, 1.0000032)

[node name="Cube" parent="Armature/Skeleton3D" index="0"]
layers = 2
mesh = ExtResource("3_k28le")

[node name="head" type="BoneAttachment3D" parent="Armature/Skeleton3D" index="1"]
transform = Transform3D(1, -3.5527137e-15, 2.3841864e-07, 5.2117503e-08, 0.97581536, -0.2185966, -2.3265257e-07, 0.2185966, 0.97581536, 0, 1.6163, -0.025439033)
bone_name = "head"
bone_idx = 1

[node name="Camera_container" type="Node3D" parent="Armature/Skeleton3D/head" index="0"]
transform = Transform3D(-1, 8.742278e-08, -7.1054274e-14, 8.742276e-08, 0.9999997, -7.4505806e-08, -2.842171e-14, -7.4505806e-08, -0.9999997, -1.2078942e-08, 0.16643727, 0.050662726)

[node name="Player_camera" type="Camera3D" parent="Armature/Skeleton3D/head/Camera_container" index="0"]
transform = Transform3D(1, 0, 0, 0, 1.0000004, -1.0430813e-07, 0, 1.0430813e-07, 1.0000004, -4.075602e-10, -0.011981845, -0.0026842058)
cull_mask = 1048573
fov = 90.0

[node name="Reticle" type="CanvasLayer" parent="Armature/Skeleton3D/head/Camera_container/Player_camera" index="0"]
layer = 0

[node name="ColorRect" type="ColorRect" parent="Armature/Skeleton3D/head/Camera_container/Player_camera/Reticle" index="0"]
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -2.0
offset_top = -2.0
offset_right = 2.0
offset_bottom = 2.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2
metadata/_edit_use_anchors_ = true

[node name="SubViewportContainer" type="SubViewportContainer" parent="Armature/Skeleton3D/head/Camera_container/Player_camera" index="1"]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="SubViewport" type="SubViewport" parent="Armature/Skeleton3D/head/Camera_container/Player_camera/SubViewportContainer" index="0"]
transparent_bg = true
handle_input_locally = false
size = Vector2i(1920, 1080)
render_target_update_mode = 4

[node name="Camera3D" type="Camera3D" parent="Armature/Skeleton3D/head/Camera_container/Player_camera/SubViewportContainer/SubViewport" index="0"]
transform = Transform3D(-1, 0, -1.509958e-07, 0, 1, 0, 1.509958e-07, 0, -1, 0, 0, 0)
cull_mask = 2
fov = 90.0

[node name="player_raycast" type="RayCast3D" parent="Armature/Skeleton3D/head/Camera_container/Player_camera" index="2"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -1)
target_position = Vector3(0, 0, -100)

[node name="arm_left" type="BoneAttachment3D" parent="Armature/Skeleton3D/head/Camera_container/Player_camera" index="3"]
transform = Transform3D(0.5611641, -0.4901861, 0.66694313, -0.7131683, -0.6953188, 0.08901494, 0.4201048, -0.5255941, -0.7397724, -0.18371804, -0.21833992, 0.056201816)
bone_name = "upperarm.l"
bone_idx = 2
override_pose = true
use_external_skeleton = true
external_skeleton = NodePath("../../../..")

[node name="arm_right" type="BoneAttachment3D" parent="Armature/Skeleton3D/head/Camera_container/Player_camera" index="4"]
transform = Transform3D(0.9310463, 0.31700757, -0.18072417, 0.35532925, -0.67490155, 0.6467221, 0.083044864, -0.6663439, -0.74100554, 0.18371795, -0.21833992, 0.056201875)
bone_name = "upperarm.r"
bone_idx = 23
override_pose = true
use_external_skeleton = true
external_skeleton = NodePath("../../../..")

[node name="right_hand" type="BoneAttachment3D" parent="Armature/Skeleton3D/head/Camera_container/Player_camera" index="5"]
transform = Transform3D(0.8198732, 0.05902215, -0.5694968, 0.56298923, 0.09788106, 0.82064795, 0.10417948, -0.99344635, 0.047021315, 0.21870296, -0.089484096, -0.22264597)
bone_name = "hand.r"
bone_idx = 25
use_external_skeleton = true
external_skeleton = NodePath("../../../..")

[node name="gun_raycast" type="RayCast3D" parent="Armature/Skeleton3D/head/Camera_container/Player_camera/right_hand" index="0"]
transform = Transform3D(0.73694634, -0.6554708, -0.1651304, 0.1298402, -0.10247676, 0.98622423, -0.663364, -0.7482356, 0.009586558, 0.009483814, 0.20369513, 0.034762383)
enabled = false
target_position = Vector3(0, 0, 1)
collision_mask = 0

[node name="left_hand" type="BoneAttachment3D" parent="Armature/Skeleton3D/head/Camera_container/Player_camera" index="6"]
transform = Transform3D(0.8185769, 0.11051242, -0.56366587, -0.0032798052, 0.9822007, 0.18780854, 0.5743882, -0.15188773, 0.8043683, -0.37303075, -0.16183639, -0.31121558)
bone_name = "hand.l"
bone_idx = 4
use_external_skeleton = true
external_skeleton = NodePath("../../../..")

[node name="Hand" type="Node3D" parent="Armature/Skeleton3D/head/Camera_container/Player_camera/left_hand" index="0"]
transform = Transform3D(0.41502896, -0.06093858, 0.9077642, 0.005863443, 0.99791265, 0.064309865, -0.90978914, -0.021368116, 0.41452044, 0, 0, 0)

[node name="Hand_container" parent="Armature/Skeleton3D/head/Camera_container/Player_camera/left_hand/Hand" index="0" instance=ExtResource("4_qo8og")]

[node name="SpotLight3D" type="SpotLight3D" parent="Armature/Skeleton3D/head" index="1"]
transform = Transform3D(-0.99999994, 0, -1.5099579e-07, 0, 0.9999999, 0, 1.5099579e-07, 0, -0.9999999, 0, 0, 0)
layers = 2
distance_fade_enabled = true
spot_angle = 71.28

[node name="AnimationTree" type="AnimationTree" parent="." index="3"]
tree_root = SubResource("AnimationNodeBlendTree_tv230")
anim_player = NodePath("../AnimationPlayer")
parameters/run/blend_position = 0.0
parameters/OneShot/active = false
parameters/OneShot/internal_active = false
parameters/OneShot/request = 0
parameters/TimeScale/scale = 1.0
